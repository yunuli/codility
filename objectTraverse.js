const v1 = {
        "set_site": {
            "site_name": "discuzv3-dev",
            "site_title": "",
            "site_keywords": "",
            "site_introduction": "",
            "site_mode": "public",
            "open_ext_fields": "0",
            "site_manage": [{"key": 1, "desc": "PC\u7aef", "value": true}, {
                "key": 2,
                "desc": "H5\u7aef",
                "value": true
            }, {"key": 3, "desc": "\u5c0f\u7a0b\u5e8f\u7aef", "value": true}],
            "api_freq": null,
            "site_close_msg": "",
            "site_favicon": "https:\/\/discuzv3-dev.dnspod.dev\/favicon.ico",
            "site_logo": "",
            "site_header_logo": "",
            "site_background_image": "",
            "site_url": "https:\/\/discuzv3-dev.dnspod.dev",
            "site_stat": "",
            "site_author": {
                "id": 1,
                "username": "admin",
                "avatar": "https:\/\/discuz-service-test-1258344699.cos.ap-guangzhou.myqcloud.com\/public\/avatar\/000\/00\/00\/01.png?sign=q-sign-algorithm%3Dsha1%26q-ak%3DAKIDCJAnwjKjthEk6HBm6fwzhCLFRRBlsBxG%26q-sign-time%3D1619454761%3B1619541221%26q-key-time%3D1619454761%3B1619541221%26q-header-list%3Dhost%26q-url-param-list%3D%26q-signature%3Ddf07a437dca15faa635b2fcdda6ee0a27583eb37"
            },
            "site_install": "2021-04-15 16:39:26",
            "site_record": "",
            "site_cover": "",
            "site_record_code": "",
            "site_onlooker_price": 0,
            "site_master_scale": "0",
            "site_pay_group_close": "1",
            "site_minimum_amount": "",
            "site_open_sort": 0,
            "site_create_thread0": 1,
            "site_create_thread1": 1,
            "site_create_thread2": 1,
            "site_create_thread3": 1,
            "site_create_thread4": 1,
            "site_create_thread5": 1,
            "site_create_thread6": 1,
            "site_can_reward": 1,
            "site_skin": 1
        },
        "set_reg": {
            "register_close": true,
            "register_validate": true,
            "register_captcha": false,
            "password_length": 0,
            "password_strength": [],
            "register_type": 0,
            "is_need_transition": true
        },
        "passport": {"offiaccount_close": true, "miniprogram_close": true, "oplatform_close": false},
        "paycenter": {"wxpay_close": true, "wxpay_ios": false, "wxpay_mchpay_close": false},
        "set_attach": {
            "support_img_ext": "png,gif,jpg,jpeg,heic,.mp4,.mp3",
            "support_file_ext": "doc,docx,pdf,zip,.mp4,.mp3",
            "support_max_size": "100"
        },
        "qcloud": {
            "qcloud_app_id": "",
            "qcloud_close": true,
            "qcloud_cos": true,
            "qcloud_captcha": true,
            "qcloud_captcha_app_id": "2047358008",
            "qcloud_faceid": false,
            "qcloud_sms": true,
            "qcloud_vod": true,
            "qcloud_cos_doc_preview": true,
            "qcloud_vod_ext": "mp4",
            "qcloud_vod_size": "50",
            "qcloud_vod_sub_app_id": "1500004773",
            "qcloud_vod_watermark": "",
            "qcloud_vod_token": ""
        },
        "set_cash": {"cash_rate": "", "cash_min_sum": ""},
        "other": {
            "count_threads": 118,
            "count_posts": 335,
            "count_users": 60,
            "can_edit_user_group": false,
            "can_edit_user_status": false,
            "can_view_threads": true,
            "can_create_dialog": false,
            "can_create_invite": false,
            "can_invite_user_scale": false,
            "can_create_thread_paid": false,
            "can_create_thread": false,
            "can_create_thread_long": false,
            "can_create_thread_video": false,
            "can_create_thread_image": false,
            "can_create_thread_audio": false,
            "can_create_thread_question": false,
            "can_create_thread_goods": false,
            "can_create_thread_position": false,
            "can_create_thread_long_position": false,
            "can_create_thread_video_position": false,
            "can_create_thread_image_position": false,
            "can_create_thread_audio_position": false,
            "can_create_thread_question_position": false,
            "can_create_thread_goods_position": false,
            "can_create_thread_red_packet": false,
            "can_create_thread_long_red_packet": false,
            "can_create_thread_anonymous": false,
            "can_create_thread_long_anonymous": false,
            "can_create_thread_video_anonymous": false,
            "can_create_thread_image_anonymous": false,
            "can_create_thread_audio_anonymous": false,
            "can_create_thread_question_anonymous": false,
            "can_create_thread_goods_anonymous": false,
            "can_create_thread_in_category": false,
            "can_upload_attachments": false,
            "can_upload_images": false,
            "initialized_pay_password": false,
            "can_be_onlooker": false,
            "create_thread_with_captcha": false,
            "publish_need_real_name": false,
            "publish_need_bind_phone": false
        },
        "lbs": {"lbs": false, "qq_lbs_key": "FF7BZ-27T3X-C574Z-73YBG-FGAJ2-4CF7I"},
        "ucenter": {"ucenter": false},
        "sign_enable": {"user_name": true, "mobile_phone": true, "wechat_direct": false}
    }
;
const v3 = {
    'setSite': {
        'siteName': 'discuzv3-dev',
        'siteTitle': '',
        'siteKeywords': '',
        'siteIntroduction': '',
        'siteMode': 'public',
        'openExtFields': '0',
        'siteManage': [{'key': 1, 'desc': 'PC端', 'value': true}, {'key': 2, 'desc': 'H5端', 'value': true}, {
            'key': 3,
            'desc': '小程序端',
            'value': true,
        }],
        'apiFreq': null,
        'siteCloseMsg': '',
        'siteFavicon': 'https:\/\/discuzv3-dev.dnspod.dev\/favicon.ico',
        'siteLogo': '',
        'siteHeaderLogo': '',
        'siteBackgroundImage': '',
        'siteUrl': 'https:\/\/discuzv3-dev.dnspod.dev',
        'siteStat': '',
        'siteAuthor': {
            'id': 1,
            'username': 'admin',
            'avatar': 'https:\/\/discuz-service-test-1258344699.cos.ap-guangzhou.myqcloud.com\/public\/avatar\/000\/00\/00\/01.png?sign=q-sign-algorithm%3Dsha1%26q-ak%3DAKIDCJAnwjKjthEk6HBm6fwzhCLFRRBlsBxG%26q-sign-time%3D1619446348%3B1619532808%26q-key-time%3D1619446348%3B1619532808%26q-header-list%3Dhost%26q-url-param-list%3D%26q-signature%3D2dae3f143750f8952adbbc06da3d38d77ae02f24',
        },
        'siteInstall': '2021-04-15 16:39:26',
        'siteRecord': '',
        'siteCover': '',
        'siteRecordCode': '',
        'siteOnlookerPrice': 0,
        'siteMasterScale': '0',
        'sitePayGroupClose': '1',
        'siteMinimumAmount': '',
        'siteOpenSort': 0,
        'siteCreateThread0': 1,
        'siteCreateThread1': 1,
        'siteCreateThread2': 1,
        'siteCreateThread3': 1,
        'siteCreateThread4': 1,
        'siteCreateThread5': 1,
        'siteCreateThread6': 1,
        'siteSkin': 1,
    },
    'setReg': {
        'registerClose': true,
        'registerValidate': true,
        'registerCaptcha': false,
        'passwordLength': 0,
        'passwordStrength': [],
        'registerType': 0,
        'isNeedTransition': true,
    },
    'passport': {'offiaccountClose': true, 'miniprogramClose': true, 'oplatformClose': false},
    'paycenter': {'wxpayClose': true, 'wxpayIos': false, 'wxpayMchpayClose': false},
    'setAttach': {
        'supportImgExt': 'png,gif,jpg,jpeg,heic,.mp4,.mp3',
        'supportFileExt': 'doc,docx,pdf,zip,.mp4,.mp3',
        'supportMaxSize': '100',
    },
    'qcloud': {
        'qcloudAppId': '',
        'qcloudClose': true,
        'qcloudCos': true,
        'qcloudCaptcha': true,
        'qcloudFaceid': false,
        'qcloudSms': true,
        'qcloudVod': true,
        'qcloudCosDocPreview': true,
        'qcloudVodExt': 'mp4',
        'qcloudVodSize': '50',
        'qcloudVodSubAppId': '1500004773',
        'qcloudVodWatermark': '',
        'qcloudVodToken': '',
    },
    'setCash': {'cashRate': '', 'cashMinSum': ''},
    'other': {
        'countThreads': 118,
        'countPosts': 335,
        'countUsers': 60,
        'canEditUserGroup': false,
        'canEditUserStatus': false,
        'canViewThreads': true,
        'canCreateDialog': false,
        'canCreateInvite': false,
        'canInviteUserScale': false,
        'canCreateThreadPaid': false,
        'canCreateThread': false,
        'canCreateThreadLong': false,
        'canCreateThreadVideo': false,
        'canCreateThreadImage': false,
        'canCreateThreadAudio': false,
        'canCreateThreadQuestion': false,
        'canCreateThreadGoods': false,
        'canCreateThreadPosition': false,
        'canCreateThreadLongPosition': false,
        'canCreateThreadVideoPosition': false,
        'canCreateThreadImagePosition': false,
        'canCreateThreadAudioPosition': false,
        'canCreateThreadQuestionPosition': false,
        'canCreateThreadGoodsPosition': false,
        'canCreateThreadRedPacket': false,
        'canCreateThreadLongRedPacket': false,
        'canCreateThreadInCategory': false,
        'canUploadAttachments': false,
        'canUploadImages': false,
        'initializedPayPassword': false,
        'canBeAsked': false,
        'canBeOnlooker': false,
        'createThreadWithCaptcha': false,
        'publishNeedRealName': false,
        'publishNeedBindPhone': false,
    },
    'lbs': {'lbs': false},
    'ucenter': {'ucenter': false},
    'signEnable': {'userName': true, 'mobilePhone': true, 'wechatDirect': false},
};

const result = {}

function isObject(o) {
    return o != null && typeof o === 'object' && !Array.isArray(o);
}


function capitalize(s) {
    if (s.length) {
        s = s[0].toUpperCase() + s.substring(1)
    }
    return s
}

function toCamel(v) {
    // console.log('to camel ', v)
    return v.replace(/_(\w)/g, (m, $1) => $1.toUpperCase())

}

function verify(v1, v3, result) {

    Object.entries(v1).forEach(([k, v]) => {
        // console.log('--------------')
        // console.log('k,v ', k, v)
        k = toCamel(k)

        if (!isObject(v)) {
            if (v3[k] === undefined) {
                result[k] = false
            }
            return
        }

        if (!isObject(v3[k])) {
            result[k] = false
            return
        }
        if (!result[k]) result[k] = {}
        verify(v, v3[k], result[k])
        if (Object.keys(result[k]).length === 0) {
            delete result[k]
        }

        // console.log(k, v)
    })
}

verify(v1, v3, result)
console.log('--------------')
console.log(result)
