/**
 A prime is a positive integer X that has exactly two distinct divisors: 1 and X. The first few prime integers are 2, 3, 5, 7, 11 and 13.

 A prime D is called a prime divisor of a positive integer P if there exists a positive integer K such that D * K = P. For example, 2 and 5 are prime divisors of 20.

 You are given two positive integers N and M. The goal is to check whether the sets of prime divisors of integers N and M are exactly the same.

 For example, given:

 N = 15 and M = 75, the prime divisors are the same: {3, 5};
 N = 10 and M = 30, the prime divisors aren't the same: {2, 5} is not equal to {2, 3, 5};
 N = 9 and M = 5, the prime divisors aren't the same: {3} is not equal to {5}.
 Write a function:

 function solution(A, B);
 that, given two non-empty zero-indexed arrays A and B of Z integers, returns the number of positions K for which the prime divisors of A[K] and B[K] are exactly the same.

 For example, given:

 A[0] = 15   B[0] = 75
 A[1] = 10   B[1] = 30
 A[2] = 3    B[2] = 5
 the function should return 1, because only one pair (15, 75) has the same set of prime divisors.

 Assume that:

 Z is an integer within the range [1..6,000];
 each element of arrays A, B is an integer within the range [1..2,147,483,647].
 */

let tester = require('./testFrame');

function getGcd(a, b) {
    if (a % b === 0) {
        return b;
    }
    return getGcd(b, a % b);
}

function gcdwrapper(a,b){


    return getGcd(a,b);
}

function solution(A, B) {

    let len = A.length, count = 0;

    for (let i = 0; i < len; i++) {
        let commonPrimeDivisors = getGcd(A[i], B[i]),
            //todo divide first to avoid big number numerical problem
            a = A[i] / commonPrimeDivisors,
            b = B[i] / commonPrimeDivisors,
            quotient = a * b;

        let gcd;
        while ((gcd  = getGcd(commonPrimeDivisors, quotient)) > 1) {
            while (quotient % gcd === 0) {
                quotient /= gcd;
            }
        }

        if (quotient === 1) count++;
    }
    return count;
}

let testcases = [
    [[15, 10, 5, 12, 61740], [75, 30, 3, 18, 44100]],
    function factory() {
        let a = [2007835830], b = [1561650090];
        for (let i = 0; i < 1; i++) {
            a = a.concat(a);
            b = b.concat(b);
        }
        return [a, b];
    }(1),
    [[1019132772,
        1411911448,
        1431105589,
        306231926,
        23322624,
        804779144,
        588513899,
        1740209191,
        1483036430,
        1291619156,
        1198704000,
        1420176218,
        312035376,
        945010470,
        348466422,
        1945562163,
        126324282,
        1758402835,
        160222969,
        1475204237,
        723701115,
        868902557,
        1809047457,
        39952431,
        130534142,
        1965019786,
        1092910084,
        195373744,
        2119854102,
        2033050727,
        241651259,
        908829280,
        290059545,
        671176030,
        1334557897,
        351165392,
        1496440670,
        110280409,
        367679464,
        1751697361,
        860107354,
        899452507,
        1279837927,
        1023852010,
        825882249,
        65486187,
        1559776273,
        2077602131,
        2096596380,
        1425061652,
        765245471,
        779812638,
        1482009526,
        1446916117,
        244453220,
        504599446,
        780228870,
        1098116841,
        1739691692,
        1073767859,
        60437207,
        1766450509,
        923749489,
        1114538224,
        477102043,
        917497473,
        833752195,
        1657682521,
        220360124,
        1181054515,
        382358450,
        1494424292,
        79126375,
        593881512,
        739117674,
        1367795979,
        111795465,
        986257718,
        448380486,
        605366616,
        1022765787,
        2058895869,
        1032992260,
        2052762175,
        359838808,
        1984811208,
        782098035,
        406373229,
        1607451155,
        1958595049,
        14332848,
        576071183,
        1655007149,
        733987875,
        518803549,
        18532473,
        85948612,
        1329457938,
        2112726773,
        2144251976],
        [2072841715,
            25028265,
            1580529968,
            339329743,
            2118147843,
            36250929,
            1888693116,
            1463189410,
            1841128747,
            2147089013,
            514784434,
            726016456,
            1520835749,
            602544582,
            565463062,
            490935647,
            1842191139,
            1878044469,
            1712867301,
            479728965,
            1986075083,
            1098158599,
            496897370,
            978257853,
            901675400,
            169563784,
            1212665949,
            773017767,
            1223240421,
            1997626587,
            1386353703,
            869946541,
            1854511021,
            2137117553,
            1052817871,
            2029425325,
            40265428,
            301330873,
            369784890,
            2014478796,
            1482805149,
            2072841715,
            25028265,
            1580529968,
            339329743,
            2118147843,
            36250929,
            1888693116,
            1463189410,
            1841128747,
            2147089013,
            514784434,
            726016456,
            1520835749,
            602544582,
            565463062,
            490935647,
            1842191139,
            1878044469,
            1712867301,
            479728965,
            1986075083,
            1098158599,
            496897370,
            978257853,
            901675400,
            169563784,
            1212665949,
            773017767,
            1223240421,
            1997626587,
            1386353703,
            869946541,
            1854511021,
            2137117553,
            1052817871,
            2029425325,
            40265428,
            301330873,
            369784890,
            2014478796,
            1482805149,
            1212665949,
            773017767,
            1223240421,
            1997626587,
            1386353703,
            869946541,
            1854511021,
            2137117553,
            1052817871,
            2029425325,
            40265428,
            301330873,
            369784890,
            2014478796,
            1482805149,
            2014478796,
            1482805149,
            1544217568]
    ],
    [
        [1020261122,
            1412647020,
            1431821967,
            308073177,
            25446784,
            806121847,
            590072867,
            1740616465,
            1483700876,
            1292475019,
            1199652779,
            1420903525,
            313870823,
            946212942,
            350265438,
            1945764084,
            128345439,
            1758791915,
            162210228,
            1475876516,
            725124897,
            870181137,
            1809385893,
            42059961,
            132551090,
            1965202250,
            1093964656,
            197325853,
            2119881732,
            2033165159,
            243557090,
            910067933,
            291916968,
            672652337,
            1335370822,
            352961709,
            1497091712,
            112317611,
            369459267,
            1752093147,
            861394729,
            900700537,
            1280705572,
            1024975641,
            827203849,
            67568183,
            1560363980,
            2077672012,
            2096647267,
            1425784073,
            766627708,
            781180308,
            1482675000,
            1447616684,
            246356249,
            506242329,
            781596124,
            1099166207,
            1740099484,
            1074841574,
            62524251,
            1766831542,
            924973222,
            1115571169,
            478772423,
            918727458,
            835065926,
            1658172322,
            222287246,
            1182020944,
            384123573,
            1495077351,
            81194731,
            595435113,
            740526039,
            1368575667,
            113831151,
            987418943,
            450079588,
            606908731,
            1023890504,
            2058984457,
            1034106750,
            2052856897,
            361626451,
            1984973881,
            783463420,
            408114338,
            1607991187,
            1958783938,
            16465997,
            577642594,
            1655499625,
            735401370,
            520432228,
            20661422,
            88010146,
            1330275963,
            2112761530,
            2144255208,
        ],
        [2072841715,
            25028264,
            1580529968,
            339329742,
            2118147843,
            36250928,
            1888693116,
            1463189410,
            1841128747,
            2147089013,
            514784433,
            726016455,
            1520835749,
            602544582,
            565463061,
            490935646,
            1842191139,
            1878044469,
            1712867301,
            479728964,
            1986075083,
            1098158598,
            496897369,
            978257853,
            901675399,
            169563783,
            1212665948,
            773017767,
            1223240421,
            1997626587,
            1386353703,
            869946540,
            1854511020,
            2137117553,
            1052817871,
            2029425325,
            40265427,
            301330872,
            369784889,
            2014478796,
            1482805149,
            1544217568,
            2072841715,
            25028264,
            1580529968,
            339329742,
            2118147843,
            36250928,
            1888693116,
            1463189410,
            1841128747,
            2147089013,
            514784433,
            726016455,
            1520835749,
            602544582,
            565463061,
            490935646,
            1842191139,
            1878044469,
            1712867301,
            479728964,
            1986075083,
            1098158598,
            496897369,
            978257853,
            901675399,
            169563783,
            1212665948,
            773017767,
            1223240421,
            1997626587,
            1386353703,
            869946540,
            1854511020,
            2137117553,
            1052817871,
            2029425325,
            40265427,
            301330872,
            369784889,
            2014478796,
            1482805149,
            1544217568,
            901675399,
            169563783,
            1212665948,
            773017767,
            1223240421,
            1997626587,
            1386353703,
            869946540,
            1854511020,
            2137117553,
            1052817871,
            2029425325,
            40265427,
            301330872,
            369784889,
            1544217568
        ]
    ]
];
tester.run(solution, testcases);